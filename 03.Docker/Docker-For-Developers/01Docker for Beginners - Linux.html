


<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="技术文档和填坑手册">
      
      
        <link rel="canonical" href="https://yichaoo.github.io/03.Docker/Docker-For-Developers/01Docker%20for%20Beginners%20-%20Linux.html">
      
      
        <meta name="author" content="Liu Yichao">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Docker for Beginners - Linux - 技术文档及填坑手册</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-for-beginners-linux" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://yichaoo.github.io/" title="技术文档及填坑手册" class="md-header-nav__button md-logo" aria-label="技术文档及填坑手册">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            技术文档及填坑手册
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Docker for Beginners - Linux
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/yichaoo/index/" title="前往 GitHub 仓库" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    yichaoo/index
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../index.html" class="md-tabs__link">
        Markdown
      </a>
    
  </li>

      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../01.MKDocs/00Hello%20mkdocs.html" class="md-tabs__link">
          MKDocs帮助
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../02.Linux/1.linux-demo.html" class="md-tabs__link">
          Linux基础
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../01DockerHome.html" class="md-tabs__link md-tabs__link--active">
          Docker容器
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://yichaoo.github.io/" title="技术文档及填坑手册" class="md-nav__button md-logo" aria-label="技术文档及填坑手册">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    技术文档及填坑手册
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/yichaoo/index/" title="前往 GitHub 仓库" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    yichaoo/index
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../index.html" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Markdown%E6%95%99%E7%A8%8B.html" title="Markdown教程" class="md-nav__link">
      Markdown教程
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../%E9%99%84%E5%BD%95%EF%BC%9A%E5%88%9B%E5%A7%8B%E4%BA%BA%20John%20Gruber%20%E7%9A%84%20Markdown%20%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E8%AF%B4%E6%98%8E.html" title="附录：创始人 John Gruber 的 Markdown 基础语法说明" class="md-nav__link">
      附录：创始人 John Gruber 的 Markdown 基础语法说明
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      MKDocs帮助
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MKDocs帮助" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MKDocs帮助
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/00Hello%20mkdocs.html" title="欢迎来到我的MK文档mkdocs" class="md-nav__link">
      欢迎来到我的MK文档mkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/01MkDocs.html" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/02MKDocConfigration.html" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/03Material%20for%20MkDocs%20Getting%20started.html" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/04CMD%20Markdown.html" title="欢迎使用 Cmd Markdown 编辑阅读器" class="md-nav__link">
      欢迎使用 Cmd Markdown 编辑阅读器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/05%E6%90%AD%E5%BB%BAGitPages.html" title="基于mkdocs-material搭建个人静态博客(含支持的markdown语法)" class="md-nav__link">
      基于mkdocs-material搭建个人静态博客(含支持的markdown语法)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01.MKDocs/06color.html" title="Color介绍" class="md-nav__link">
      Color介绍
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Linux基础
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Linux基础" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Linux基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../02.Linux/1.linux-demo.html" title="Linux 基本命令手册" class="md-nav__link">
      Linux 基本命令手册
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Docker容器
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker容器" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker容器
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01DockerHome.html" title="01.开始Docker" class="md-nav__link">
      01.开始Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02Docker%20Desktop-Windows.html" title="02.Docker Desktop-Window" class="md-nav__link">
      02.Docker Desktop-Window
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Docker%20Tutorials%20and%20Labs.html" title="Docker Tutorials and Labs" class="md-nav__link">
      Docker Tutorials and Labs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Docker-Start-Windows.html" title="Get started with Docker for Windows" class="md-nav__link">
      Get started with Docker for Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Play%20with%20Docker%20Classroom.html" title="Play with Docker Classroom" class="md-nav__link">
      Play with Docker Classroom
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test.html" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7" checked>
    
    <label class="md-nav__link" for="nav-6-7">
      Docker For Developers
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker For Developers" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker For Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Docker for Beginners - Linux
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="01Docker%20for%20Beginners%20-%20Linux.html" title="Docker for Beginners - Linux" class="md-nav__link md-nav__link--active">
      Docker for Beginners - Linux
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目录
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task-0-prerequisites" class="md-nav__link">
    Task 0: Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Task 0: Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-labs-github-repo" class="md-nav__link">
    Clone the Lab’s GitHub Repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-a-dockerid" class="md-nav__link">
    Make sure you have a DockerID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-run-some-simple-docker-containers" class="md-nav__link">
    Task 1: Run some simple Docker containers
  </a>
  
    <nav class="md-nav" aria-label="Task 1: Run some simple Docker containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-a-single-task-in-an-alpine-linux-container" class="md-nav__link">
    Run a single task in an Alpine Linux container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-an-interactive-ubuntu-container" class="md-nav__link">
    Run an interactive Ubuntu container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-a-background-mysql-container" class="md-nav__link">
    Run a background MySQL container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-package-and-run-a-custom-app-using-docker" class="md-nav__link">
    Task 2: Package and run a custom app using Docker
  </a>
  
    <nav class="md-nav" aria-label="Task 2: Package and run a custom app using Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-simple-website-image" class="md-nav__link">
    Build a simple website image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-modify-a-running-website" class="md-nav__link">
    Task 3: Modify a running website
  </a>
  
    <nav class="md-nav" aria-label="Task 3: Modify a running website">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-our-web-app-with-a-bind-mount" class="md-nav__link">
    Start our web app with a bind mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-the-running-website" class="md-nav__link">
    Modify the running website
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-image" class="md-nav__link">
    Update the image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-new-version" class="md-nav__link">
    Test the new version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push-your-images-to-docker-hub" class="md-nav__link">
    Push your images to Docker Hub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-step" class="md-nav__link">
    Next Step
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="02Application%20Containerization%20and%20Microservice%20Orchestration.html" title="Application Containerization and Microservice Orchestration" class="md-nav__link">
      Application Containerization and Microservice Orchestration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-8" type="checkbox" id="nav-6-8">
    
    <label class="md-nav__link" for="nav-6-8">
      踩坑记录
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="踩坑记录" data-md-level="2">
      <label class="md-nav__title" for="nav-6-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        踩坑记录
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/2.CentOS7%20%E5%AE%B9%E5%99%A8%E7%8E%AF%E5%A2%83%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E7%BD%91%E6%A1%A5Docker0%EF%BC%8C%E9%87%87%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E6%A1%A5%E8%BF%9B%E8%A1%8C%E9%80%9A%E8%AE%AF.html" title="CentOS7 容器环境删除默认网桥Docker0，采用自定义网桥进行通讯" class="md-nav__link">
      CentOS7 容器环境删除默认网桥Docker0，采用自定义网桥进行通讯
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目录
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task-0-prerequisites" class="md-nav__link">
    Task 0: Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Task 0: Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-labs-github-repo" class="md-nav__link">
    Clone the Lab’s GitHub Repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-a-dockerid" class="md-nav__link">
    Make sure you have a DockerID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-run-some-simple-docker-containers" class="md-nav__link">
    Task 1: Run some simple Docker containers
  </a>
  
    <nav class="md-nav" aria-label="Task 1: Run some simple Docker containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-a-single-task-in-an-alpine-linux-container" class="md-nav__link">
    Run a single task in an Alpine Linux container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-an-interactive-ubuntu-container" class="md-nav__link">
    Run an interactive Ubuntu container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-a-background-mysql-container" class="md-nav__link">
    Run a background MySQL container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-package-and-run-a-custom-app-using-docker" class="md-nav__link">
    Task 2: Package and run a custom app using Docker
  </a>
  
    <nav class="md-nav" aria-label="Task 2: Package and run a custom app using Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-simple-website-image" class="md-nav__link">
    Build a simple website image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-modify-a-running-website" class="md-nav__link">
    Task 3: Modify a running website
  </a>
  
    <nav class="md-nav" aria-label="Task 3: Modify a running website">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-our-web-app-with-a-bind-mount" class="md-nav__link">
    Start our web app with a bind mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-the-running-website" class="md-nav__link">
    Modify the running website
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-image" class="md-nav__link">
    Update the image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-new-version" class="md-nav__link">
    Test the new version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push-your-images-to-docker-hub" class="md-nav__link">
    Push your images to Docker Hub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-step" class="md-nav__link">
    Next Step
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/yichaoo/index/edit/master/docs/03.Docker/Docker-For-Developers/01Docker for Beginners - Linux.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="docker-for-beginners-linux">Docker for Beginners - Linux<a class="headerlink" href="#docker-for-beginners-linux" title="Permanent link">&para;</a></h1>
<p>Aug 1, 2019 • @mikegcoleman</p>
<p>In this lab, we will look at some basic Docker commands and a simple build-ship-run workflow. We’ll start by running some simple containers, then we’ll use a Dockerfile to build a custom app. Finally, we’ll look at how to use bind mounts to modify a running container as you might if you were actively developing using Docker.</p>
<blockquote>
<p><strong>Difficulty</strong>: Beginner (assumes no familiarity with Docker)</p>
<p><strong>Time</strong>: Approximately 30 minutes</p>
<p><strong>Tasks</strong>:</p>
<ul>
<li><a href="https://training.play-with-docker.com/beginner-linux/#Task_0">Task 0: Prerequisites</a></li>
<li><a href="https://training.play-with-docker.com/beginner-linux/#Task_1">Task 1: Run some simple Docker containers</a></li>
<li><a href="https://training.play-with-docker.com/beginner-linux/#Task_2">Task 2: Package and run a custom app using Docker</a></li>
<li><a href="https://training.play-with-docker.com/beginner-linux/#Task_3">Task 3: Modify a Running Website</a></li>
</ul>
</blockquote>
<h2 id="task-0-prerequisites">Task 0: Prerequisites<a class="headerlink" href="#task-0-prerequisites" title="Permanent link">&para;</a></h2>
<p>You will need all of the following to complete this lab:</p>
<ul>
<li>A clone of the lab’s GitHub repo.</li>
<li>A DockerID.</li>
</ul>
<h3 id="clone-the-labs-github-repo">Clone the Lab’s GitHub Repo<a class="headerlink" href="#clone-the-labs-github-repo" title="Permanent link">&para;</a></h3>
<p>Use the following command to clone the lab’s repo from GitHub (you can click the command or manually type it). This will make a copy of the lab’s repo in a new sub-directory called <code>linux_tweet_app</code>.</p>
<div class="highlight"><pre><span></span><code>    git clone https://github.com/dockersamples/linux_tweet_app
</code></pre></div>

<h3 id="make-sure-you-have-a-dockerid">Make sure you have a DockerID<a class="headerlink" href="#make-sure-you-have-a-dockerid" title="Permanent link">&para;</a></h3>
<p>If you do not have a DockerID (a free login used to access Docker Hub), please visit <a href="https://hub.docker.com/">Docker Hub</a> and register for one. You will need this for later steps.</p>
<h2 id="task-1-run-some-simple-docker-containers">Task 1: Run some simple Docker containers<a class="headerlink" href="#task-1-run-some-simple-docker-containers" title="Permanent link">&para;</a></h2>
<p>There are different ways to use containers. These include:</p>
<ol>
<li><strong>To run a single task:</strong> This could be a shell script or a custom app.</li>
<li><strong>Interactively:</strong> This connects you to the container similar to the way you SSH into a remote server.</li>
<li><strong>In the background:</strong> For long-running services like websites and databases.</li>
</ol>
<p>In this section you’ll try each of those options and see how Docker manages the workload.</p>
<h3 id="run-a-single-task-in-an-alpine-linux-container">Run a single task in an Alpine Linux container<a class="headerlink" href="#run-a-single-task-in-an-alpine-linux-container" title="Permanent link">&para;</a></h3>
<p>In this step we’re going to start a new container and tell it to run the <code>hostname</code> command. The container will start, execute the <code>hostname</code> command, then exit.</p>
<ol>
<li>Run the following command in your Linux console.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container run alpine hostname
</code></pre></div>

<p>The output below shows that the <code>alpine:latest</code> image could not be found locally. When this happens, Docker automatically <em>pulls</em> it from Docker Hub.</p>
<p>After the image is pulled, the container’s hostname is displayed (<code>888e89a3b36b</code> in the example below).</p>
<div class="highlight"><pre><span></span><code> Unable to find image &#39;alpine:latest&#39; locally
 latest: Pulling from library/alpine
 88286f41530e: Pull complete
 Digest: sha256:f006ecbb824d87947d0b51ab8488634bf69fe4094959d935c0c103f4820a417d
 Status: Downloaded newer image for alpine:latest
 888e89a3b36b
</code></pre></div>

<ol>
<li>Docker keeps a container running as long as the process it started inside the container is still running. In this case the <code>hostname</code> process exits as soon as the output is written. This means the container stops. However, Docker doesn’t delete resources by default, so the container still exists in the <code>Exited</code> state.</li>
</ol>
<p>List all containers.</p>
<div class="highlight"><pre><span></span><code> docker container ls --all
</code></pre></div>

<p>Notice that your Alpine Linux container is in the <code>Exited</code> state.</p>
<div class="highlight"><pre><span></span><code> CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS            PORTS               NAMES
 888e89a3b36b        alpine              &quot;hostname&quot;          50 seconds ago      Exited (0) 49 seconds ago                       awesome_elion
</code></pre></div>

<blockquote>
<p><strong>Note:</strong> The container ID <em>is</em> the hostname that the container displayed. In the example above it’s <code>888e89a3b36b</code>.</p>
</blockquote>
<p>Containers which do one task and then exit can be very useful. You could build a Docker image that executes a script to configure something. Anyone can execute that task just by running the container - they don’t need the actual scripts or configuration information.</p>
<h3 id="run-an-interactive-ubuntu-container">Run an interactive Ubuntu container<a class="headerlink" href="#run-an-interactive-ubuntu-container" title="Permanent link">&para;</a></h3>
<p>You can run a container based on a different version of Linux than is running on your Docker host.</p>
<p>In the next example, we are going to run an Ubuntu Linux container on top of an Alpine Linux Docker host (Play With Docker uses Alpine Linux for its nodes).</p>
<ol>
<li>Run a Docker container and access its shell.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container run --interactive --tty --rm ubuntu bash
</code></pre></div>

<p>In this example, we’re giving Docker three parameters:</p>
<ul>
<li><code>--interactive</code> says you want an interactive session.</li>
<li><code>--tty</code> allocates a pseudo-tty.</li>
<li><code>--rm</code> tells Docker to go ahead and remove the container when it’s done executing.</li>
</ul>
<p>The first two parameters allow you to interact with the Docker container.</p>
<p>We’re also telling the container to run <code>bash</code> as its main process (PID 1).</p>
<p>When the container starts you’ll drop into the bash shell with the default prompt <code>root@&lt;container id&gt;:/#</code>. Docker has attached to the shell in the container, relaying input and output between your local session and the shell session in the container.</p>
<ol>
<li>Run the following commands in the container.</li>
</ol>
<p><code>ls /</code> will list the contents of the root director in the container, <code>ps aux</code> will show running processes in the container, <code>cat /etc/issue</code> will show which Linux distro the container is running, in this case Ubuntu 18.04.3 LTS.</p>
<div class="highlight"><pre><span></span><code>ls /
</code></pre></div>

<div class="highlight"><pre><span></span><code>ps aux
</code></pre></div>

<div class="highlight"><pre><span></span><code>cat /etc/issue
</code></pre></div>

<ol>
<li>Type <code>exit</code> to leave the shell session. This will terminate the <code>bash</code> process, causing the container to exit.</li>
</ol>
<div class="highlight"><pre><span></span><code> exit
</code></pre></div>

<blockquote>
<p><strong>Note:</strong> As we used the <code>--rm</code> flag when we started the container, Docker removed the container when it stopped. This means if you run another <code>docker container ls --all</code> you won’t see the Ubuntu container.</p>
</blockquote>
<ol>
<li>For fun, let’s check the version of our host VM.</li>
</ol>
<div class="highlight"><pre><span></span><code> cat /etc/issue
</code></pre></div>

<p>You should see:</p>
<div class="highlight"><pre><span></span><code> Welcome to Alpine Linux 3.8
 Kernel \r on an \m (\l)
</code></pre></div>

<p>Notice that our host VM is running Alpine Linux, yet we were able to run an Ubuntu container. As previously mentioned, the distribution of Linux inside the container does not need to match the distribution of Linux running on the Docker host.</p>
<p>However, Linux containers require the Docker host to be running a Linux kernel. For example, Linux containers cannot run directly on Windows Docker hosts. The same is true of Windows containers - they need to run on a Docker host with a Windows kernel.</p>
<p>Interactive containers are useful when you are putting together your own image. You can run a container and verify all the steps you need to deploy your app, and capture them in a Dockerfile.</p>
<blockquote>
<p>You <em>can</em> <a href="https://docs.docker.com/engine/reference/commandline/commit/">commit</a> a container to make an image from it - but you should avoid that wherever possible. It’s much better to use a repeatable <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a> to build your image. You’ll see that shortly.</p>
</blockquote>
<h3 id="run-a-background-mysql-container">Run a background MySQL container<a class="headerlink" href="#run-a-background-mysql-container" title="Permanent link">&para;</a></h3>
<p>Background containers are how you’ll run most applications. Here’s a simple example using MySQL.</p>
<ol>
<li>Run a new MySQL container with the following command.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --name mydb \
 -e MYSQL_ROOT_PASSWORD=my-secret-pw \
 mysql:latest
</code></pre></div>

<ul>
<li><code>--detach</code> will run the container in the background.</li>
<li><code>--name</code> will name it <strong>mydb</strong>.</li>
<li><code>-e</code> will use an environment variable to specify the root password (NOTE: This should never be done in production).</li>
</ul>
<p>As the MySQL image was not available locally, Docker automatically pulled it from Docker Hub.</p>
<div class="highlight"><pre><span></span><code> Unable to find image &#39;mysql:latest&#39; locallylatest: Pulling from library/mysql
 aa18ad1a0d33: Pull complete
 fdb8d83dece3: Pull complete
 75b6ce7b50d3: Pull complete
 ed1d0a3a64e4: Pull complete
 8eb36a82c85b: Pull complete
 41be6f1a1c40: Pull complete
 0e1b414eac71: Pull complete
 914c28654a91: Pull complete
 587693eb988c: Pull complete
 b183c3585729: Pull complete
 315e21657aa4: Pull complete
 Digest: sha256:0dc3dacb751ef46a6647234abdec2d47400f0dfbe77ab490b02bffdae57846ed
 Status: Downloaded newer image for mysql:latest
 41d6157c9f7d1529a6c922acb8167ca66f167119df0fe3d86964db6c0d7ba4e0
</code></pre></div>

<p>As long as the MySQL process is running, Docker will keep the container running in the background.</p>
<ol>
<li>List the running containers.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container ls
</code></pre></div>

<p>Notice your container is running.</p>
<div class="highlight"><pre><span></span><code> CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS            NAMES
 3f4e8da0caf7        mysql:latest        &quot;docker-entrypoint...&quot;   52 seconds ago      Up 51 seconds       3306/tcp            mydb
</code></pre></div>

<ol>
<li>You can check what’s happening in your containers by using a couple of built-in Docker commands: <code>docker container logs</code> and <code>docker container top</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container logs mydb
</code></pre></div>

<p>This shows the logs from the MySQL Docker container.</p>
<div class="highlight"><pre><span></span><code>   &lt;output truncated&gt;
   2017-09-29T16:02:58.605004Z 0 [Note] Executing &#39;SELECT * FROM INFORMATION_SCHEMA.TABLES;&#39; to get a list of tables using the deprecated partition engine. You may use the startup option &#39;--disable-partition-engine-check&#39; to skip this check.
   2017-09-29T16:02:58.605026Z 0 [Note] Beginning of list of non-natively partitioned tables
   2017-09-29T16:02:58.616575Z 0 [Note] End of list of non-natively partitioned tables
</code></pre></div>

<p>Let’s look at the processes running inside the container.</p>
<div class="highlight"><pre><span></span><code>   docker container top mydb
</code></pre></div>

<p>You should see the MySQL daemon (<code>mysqld</code>) is running in the container.</p>
<div class="highlight"><pre><span></span><code> PID                 USER                TIME                COMMAND
 2876                999                 0:00                mysqld
</code></pre></div>

<p>Although MySQL is running, it is isolated within the container because no network ports have been published to the host. Network traffic cannot reach containers from the host unless ports are explicitly published.</p>
<ol>
<li>List the MySQL version using <code>docker container exec</code>.</li>
</ol>
<p><code>docker container exec</code> allows you to run a command inside a container. In this example, we’ll use <code>docker container exec</code> to run the command-line equivalent of <code>mysql --user=root --password=$MYSQL_ROOT_PASSWORD --version</code> inside our MySQL container.</p>
<div class="highlight"><pre><span></span><code> docker exec -it mydb \
 mysql --user=root --password=$MYSQL_ROOT_PASSWORD --version
</code></pre></div>

<p>You will see the MySQL version number, as well as a handy warning.</p>
<div class="highlight"><pre><span></span><code> mysql: [Warning] Using a password on the command line interface can be insecure.
 mysql  Ver 14.14 Distrib 5.7.19, for Linux (x86_64) using  EditLine wrapper
</code></pre></div>

<ol>
<li>You can also use <code>docker container exec</code> to connect to a new shell process inside an already-running container. Executing the command below will give you an interactive shell (<code>sh</code>) inside your MySQL container.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker exec -it mydb sh
</code></pre></div>

<p>Notice that your shell prompt has changed. This is because your shell is now connected to the <code>sh</code> process running inside of your container.</p>
<ol>
<li>Let’s check the version number by running the same command again, only this time from within the new shell session in the container.</li>
</ol>
<div class="highlight"><pre><span></span><code> mysql --user=root --password=$MYSQL_ROOT_PASSWORD --version
</code></pre></div>

<p>Notice the output is the same as before.</p>
<ol>
<li>Type <code>exit</code> to leave the interactive shell session.</li>
</ol>
<div class="highlight"><pre><span></span><code> exit
</code></pre></div>

<h2 id="task-2-package-and-run-a-custom-app-using-docker">Task 2: Package and run a custom app using Docker<a class="headerlink" href="#task-2-package-and-run-a-custom-app-using-docker" title="Permanent link">&para;</a></h2>
<p>In this step you’ll learn how to package your own apps as Docker images using a <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a>.</p>
<p>The Dockerfile syntax is straightforward. In this task, we’re going to create a simple NGINX website from a Dockerfile.</p>
<h3 id="build-a-simple-website-image">Build a simple website image<a class="headerlink" href="#build-a-simple-website-image" title="Permanent link">&para;</a></h3>
<p>Let’s have a look at the Dockerfile we’ll be using, which builds a simple website that allows you to send a tweet.</p>
<ol>
<li>Make sure you’re in the <code>linux_tweet_app</code> directory.</li>
</ol>
<div class="highlight"><pre><span></span><code> cd ~/linux_tweet_app
</code></pre></div>

<ol>
<li>Display the contents of the Dockerfile.</li>
</ol>
<div class="highlight"><pre><span></span><code> cat Dockerfile
</code></pre></div>

<div class="highlight"><pre><span></span><code> FROM nginx:latest

 COPY index.html /usr/share/nginx/html
 COPY linux.png /usr/share/nginx/html

 EXPOSE 80 443     

 CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]
</code></pre></div>

<p>Let’s see what each of these lines in the Dockerfile do.</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/#from">FROM</a> specifies the base image to use as the starting point for this new image you’re creating. For this example we’re starting from <code>nginx:latest</code>.</li>
<li><a href="https://docs.docker.com/engine/reference/builder/#copy">COPY</a> copies files from the Docker host into the image, at a known location. In this example, <code>COPY</code> is used to copy two files into the image: <code>index.html</code>. and a graphic that will be used on our webpage.</li>
<li><a href="https://docs.docker.com/engine/reference/builder/#expose">EXPOSE</a> documents which ports the application uses.</li>
<li>
<p><a href="https://docs.docker.com/engine/reference/builder/#cmd">CMD</a> specifies what command to run when a container is started from the image. Notice that we can specify the command, as well as run-time arguments.</p>
</li>
<li>
<p>In order to make the following commands more copy/paste friendly, export an environment variable containing your DockerID (if you don’t have a DockerID you can get one for free via <a href="https://hub.docker.com/">Docker Hub</a>).</p>
</li>
</ul>
<p>You will have to manually type this command as it requires your unique DockerID.</p>
<p><code>export DOCKERID=&lt;your docker id&gt;</code></p>
<ol>
<li>Echo the value of the variable back to the terminal to ensure it was stored correctly.</li>
</ol>
<div class="highlight"><pre><span></span><code> echo $DOCKERID
</code></pre></div>

<ol>
<li>
<p>Use the <code>docker image build</code> command to create a new Docker image using the instructions in the Dockerfile.</p>
</li>
<li>
<p><code>--tag</code> allows us to give the image a custom name. In this case it’s comprised of our DockerID, the application name, and a version. Having the Docker ID attached to the name will allow us to store it on Docker Hub in a later step</p>
</li>
<li><code>.</code> tells Docker to use the current directory as the build context</li>
</ol>
<p>Be sure to include period (<code>.</code>) at the end of the command.</p>
<div class="highlight"><pre><span></span><code> docker image build --tag $DOCKERID/linux_tweet_app:1.0 .
</code></pre></div>

<p>The output below shows the Docker daemon executing each line in the Dockerfile</p>
<div class="highlight"><pre><span></span><code> Sending build context to Docker daemon  32.77kB
 Step 1/5 : FROM nginx:latest
 latest: Pulling from library/nginx
 afeb2bfd31c0: Pull complete
 7ff5d10493db: Pull complete
 d2562f1ae1d0: Pull complete
 Digest: sha256:af32e714a9cc3157157374e68c818b05ebe9e0737aac06b55a09da374209a8f9
 Status: Downloaded newer image for nginx:latest
 ---&gt; da5939581ac8
 Step 2/5 : COPY index.html /usr/share/nginx/html
 ---&gt; eba2eec2bea9
 Step 3/5 : COPY linux.png /usr/share/nginx/html
 ---&gt; 4d080f499b53
 Step 4/5 : EXPOSE 80 443
 ---&gt; Running in 47232cb5699f
 ---&gt; 74c968a9165f
 Removing intermediate container 47232cb5699f
 Step 5/5 : CMD nginx -g daemon off;
 ---&gt; Running in 4623761274ac
 ---&gt; 12045a0df899
 Removing intermediate container 4623761274ac
 Successfully built 12045a0df899
 Successfully tagged &lt;your docker ID&gt;/linux_tweet_app:latest
</code></pre></div>

<ol>
<li>Use the <code>docker container run</code> command to start a new container from the image you created.</li>
</ol>
<p>As this container will be running an NGINX web server, we’ll use the <code>--publish</code> flag to publish port 80 inside the container onto port 80 on the host. This will allow traffic coming in to the Docker host on port 80 to be directed to port 80 in the container. The format of the <code>--publish</code> flag is <code>host_port</code>:<code>container_port</code>.</p>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --publish 80:80 \
 --name linux_tweet_app \
 $DOCKERID/linux_tweet_app:1.0
</code></pre></div>

<p>Any external traffic coming into the server on port 80 will now be directed into the container on port 80.</p>
<p>In a later step you will see how to map traffic from two different ports - this is necessary when two containers use the same port to communicate since you can only expose the port once on the host.</p>
<ol>
<li>
<p><a href="https://training.play-with-docker.com/">Click here to load the website</a> which should be running.</p>
</li>
<li>
<p>Once you’ve accessed your website, shut it down and remove it.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container rm --force linux_tweet_app
</code></pre></div>

<blockquote>
<p><strong>Note:</strong> We used the <code>--force</code> parameter to remove the running container without shutting it down. This will ungracefully shutdown the container and permanently remove it from the Docker host.</p>
<p>In a production environment you may want to use <code>docker container stop</code> to gracefully stop the container and leave it on the host. You can then use <code>docker container rm</code> to permanently remove it.</p>
</blockquote>
<h2 id="task-3-modify-a-running-website">Task 3: Modify a running website<a class="headerlink" href="#task-3-modify-a-running-website" title="Permanent link">&para;</a></h2>
<p>When you’re actively working on an application it is inconvenient to have to stop the container, rebuild the image, and run a new version every time you make a change to your source code.</p>
<p>One way to streamline this process is to mount the source code directory on the local machine into the running container. This will allow any changes made to the files on the host to be immediately reflected in the container.</p>
<p>We do this using something called a <a href="https://docs.docker.com/engine/admin/volumes/bind-mounts/">bind mount</a>.</p>
<p>When you use a bind mount, a file or directory on the host machine is mounted into a container running on the same host.</p>
<h3 id="start-our-web-app-with-a-bind-mount">Start our web app with a bind mount<a class="headerlink" href="#start-our-web-app-with-a-bind-mount" title="Permanent link">&para;</a></h3>
<ol>
<li>Let’s start the web app and mount the current directory into the container.</li>
</ol>
<p>In this example we’ll use the <code>--mount</code> flag to mount the current directory on the host into <code>/usr/share/nginx/html</code> inside the container.</p>
<p>Be sure to run this command from within the <code>linux_tweet_app</code> directory on your Docker host.</p>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --publish 80:80 \
 --name linux_tweet_app \
 --mount type=bind,source=&quot;$(pwd)&quot;,target=/usr/share/nginx/html \
 $DOCKERID/linux_tweet_app:1.0
</code></pre></div>

<blockquote>
<p>Remember from the Dockerfile, <code>usr/share/nginx/html</code> is where the html files are stored for the web app.</p>
</blockquote>
<ol>
<li>The <a href="https://training.play-with-docker.com/">website</a> should be running.</li>
</ol>
<h3 id="modify-the-running-website">Modify the running website<a class="headerlink" href="#modify-the-running-website" title="Permanent link">&para;</a></h3>
<p>Bind mounts mean that any changes made to the local file system are immediately reflected in the running container.</p>
<ol>
<li>Copy a new <code>index.html</code> into the container.</li>
</ol>
<p>The Git repo that you pulled earlier contains several different versions of an index.html file. You can manually run an <code>ls</code> command from within the <code>~/linux_tweet_app</code> directory to see a list of them. In this step we’ll replace <code>index.html</code> with <code>index-new.html</code>.</p>
<div class="highlight"><pre><span></span><code> cp index-new.html index.html
</code></pre></div>

<ol>
<li>Go to the running <a href="https://training.play-with-docker.com/">website</a> and <strong>refresh the page</strong>. Notice that the site has changed.</li>
</ol>
<blockquote>
<p>If you are comfortable with <code>vi</code> you can use it to load the local <code>index.html</code> file and make additional changes. Those too would be reflected when you reload the webpage. If you are really adventurous, why not try using <code>exec</code> to access the running container and modify the files stored there.</p>
</blockquote>
<p>Even though we’ve modified the <code>index.html</code> local filesystem and seen it reflected in the running container, we’ve not actually changed the Docker image that the container was started from.</p>
<p>To show this, stop the current container and re-run the <code>1.0</code> image without a bind mount.</p>
<ol>
<li>Stop and remove the currently running container.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker rm --force linux_tweet_app
</code></pre></div>

<ol>
<li>Rerun the current version without a bind mount.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --publish 80:80 \
 --name linux_tweet_app \
 $DOCKERID/linux_tweet_app:1.0
</code></pre></div>

<ol>
<li>
<p>Notice the <a href="https://training.play-with-docker.com/">website</a> is back to the original version.</p>
</li>
<li>
<p>Stop and remove the current container</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>docker rm --force linux_tweet_app
</code></pre></div>

<h3 id="update-the-image">Update the image<a class="headerlink" href="#update-the-image" title="Permanent link">&para;</a></h3>
<p>To persist the changes you made to the <code>index.html</code> file into the image, you need to build a new version of the image.</p>
<ol>
<li>Build a new image and tag it as <code>2.0</code></li>
</ol>
<p>Remember that you previously modified the <code>index.html</code> file on the Docker hosts local filesystem. This means that running another <code>docker image build</code> command will build a new image with the updated <code>index.html</code></p>
<p>Be sure to include the period (<code>.</code>) at the end of the command.</p>
<div class="highlight"><pre><span></span><code> docker image build --tag $DOCKERID/linux_tweet_app:2.0 .
</code></pre></div>

<p>Notice how fast that built! This is because Docker only modified the portion of the image that changed vs. rebuilding the whole image.</p>
<ol>
<li>Let’s look at the images on the system.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker image ls
</code></pre></div>

<p>You now have both versions of the web app on your host.</p>
<div class="highlight"><pre><span></span><code> REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE
 &lt;docker id&gt;/linux_tweet_app    2.0                 01612e05312b        16 seconds ago      108MB
 &lt;docker id&gt;/linux_tweet_app    1.0                 bb32b5783cd3        4 minutes ago       108MB
 mysql                          latest              b4e78b89bcf3        2 weeks ago         412MB
 ubuntu                         latest              2d696327ab2e        2 weeks ago         122MB
 nginx                          latest              da5939581ac8        3 weeks ago         108MB
 alpine                         latest              76da55c8019d        3 weeks ago         3.97MB
</code></pre></div>

<h3 id="test-the-new-version">Test the new version<a class="headerlink" href="#test-the-new-version" title="Permanent link">&para;</a></h3>
<ol>
<li>Run a new container from the new version of the image.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --publish 80:80 \
 --name linux_tweet_app \
 $DOCKERID/linux_tweet_app:2.0
</code></pre></div>

<ol>
<li>Check the new version of the <a href="https://training.play-with-docker.com/">website</a> (<strong>You may need to refresh your browser to get the new version to load</strong>).</li>
</ol>
<p>The web page will have an orange background.</p>
<p>We can run both versions side by side. The only thing we need to be aware of is that we cannot have two containers using port 80 on the same host.</p>
<p>As we’re already using port 80 for the container running from the <code>2.0</code> version of the image, we will start a new container and publish it on port 8080. Additionally, we need to give our container a unique name (<code>old_linux_tweet_app</code>)</p>
<ol>
<li>Run another new container, this time from the old version of the image.</li>
</ol>
<p>Notice that this command maps the new container to port 8080 on the host. This is because two containers cannot map to the same port on a single Docker host.</p>
<div class="highlight"><pre><span></span><code> docker container run \
 --detach \
 --publish 8080:80 \
 --name old_linux_tweet_app \
 $DOCKERID/linux_tweet_app:1.0
</code></pre></div>

<ol>
<li>View the old version of the <a href="https://training.play-with-docker.com/">website</a>.</li>
</ol>
<h3 id="push-your-images-to-docker-hub">Push your images to Docker Hub<a class="headerlink" href="#push-your-images-to-docker-hub" title="Permanent link">&para;</a></h3>
<ol>
<li>List the images on your Docker host.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker image ls -f reference=&quot;$DOCKERID/*&quot;
</code></pre></div>

<p>You will see that you now have two <code>linux_tweet_app</code> images - one tagged as <code>1.0</code> and the other as <code>2.0</code>.</p>
<div class="highlight"><pre><span></span><code> REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE
 &lt;docker id&gt;/linux_tweet_app    2.0                 01612e05312b        3 minutes ago       108MB
 &lt;docker id&gt;/linux_tweet_app    1.0                 bb32b5783cd3        7 minutes ago       108MB
</code></pre></div>

<p>These images are only stored in your Docker hosts local repository. Your Docker host will be deleted after the workshop. In this step we’ll push the images to a public repository so you can run them from any Linux machine with Docker.</p>
<p>Distribution is built into the Docker platform. You can build images locally and push them to a public or private <a href="https://docs.docker.com/registry/">registry</a>, making them available to other users. Anyone with access can pull that image and run a container from it. The behavior of the app in the container will be the same for everyone, because the image contains the fully-configured app - the only requirements to run it are Linux and Docker.</p>
<p><a href="https://hub.docker.com/">Docker Hub</a> is the default public registry for Docker images.</p>
<ol>
<li>Before you can push your images, you will need to log into Docker Hub.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker login
</code></pre></div>

<p>You will need to supply your Docker ID credentials when prompted.</p>
<div class="highlight"><pre><span></span><code> Username: &lt;your docker id&gt;
 Password: &lt;your docker id password&gt;
 Login Succeeded
</code></pre></div>

<ol>
<li>Push version <code>1.0</code> of your web app using <code>docker image push</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker image push $DOCKERID/linux_tweet_app:1.0
</code></pre></div>

<p>You’ll see the progress as the image is pushed up to Docker Hub.</p>
<div class="highlight"><pre><span></span><code> The push refers to a repository [docker.io/&lt;your docker id&gt;/linux_tweet_app]
 910e84bcef7a: Pushed
 1dee161c8ba4: Pushed
 110566462efa: Pushed
 305e2b6ef454: Pushed
 24e065a5f328: Pushed
 1.0: digest: sha256:51e937ec18c7757879722f15fa1044cbfbf2f6b7eaeeb578c7c352baba9aa6dc size: 1363
</code></pre></div>

<ol>
<li>Now push version <code>2.0</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code> docker image push $DOCKERID/linux_tweet_app:2.0
</code></pre></div>

<p>Notice that several lines of the output say <code>Layer already exists</code>. This is because Docker will leverage read-only layers that are the same as any previously uploaded image layers.</p>
<div class="highlight"><pre><span></span><code> The push refers to a repository [docker.io/&lt;your docker id&gt;/linux_tweet_app]
 0b171f8fbe22: Pushed
 70d38c767c00: Pushed
 110566462efa: Layer already exists
 305e2b6ef454: Layer already exists
 24e065a5f328: Layer already exists
 2.0: digest: sha256:7c51f77f90b81e5a598a13f129c95543172bae8f5850537225eae0c78e4f3add size: 1363
</code></pre></div>

<p>You can browse to <code>https://hub.docker.com/r/&lt;your docker id&gt;/</code> and see your newly-pushed Docker images. These are public repositories, so anyone can pull the image - you don’t even need a Docker ID to pull public images. Docker Hub also supports private repositories.</p>
<h3 id="next-step">Next Step<a class="headerlink" href="#next-step" title="Permanent link">&para;</a></h3>
<p>Check out the introduction to a multi-service application stack orchestration in the <a href="https://training.play-with-docker.com/microservice-orchestration">Application Containerization and Microservice Orchestration</a> tutorial.</p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2020年7月18日</span>
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../test.html" title="Test" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                Test
              </div>
            </div>
          </a>
        
        
          <a href="02Application%20Containerization%20and%20Microservice%20Orchestration.html" title="Application Containerization and Microservice Orchestration" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                Application Containerization and Microservice Orchestration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020 LYC
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/yichaoo" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/yichaoo" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/yichaoo" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154zm-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4zm-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2zM563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4zm-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6zm107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>